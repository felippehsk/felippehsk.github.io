{"id":"UST7","dependencies":[{"name":"C:\\MSc_Felippe\\felippehsk.github.io\\package.json","includedInParent":true,"mtime":1583339818861},{"name":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1583339777280},{"name":"../../util.js","loc":{"line":17,"column":23},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\util.js"},{"name":"../../TileState.js","loc":{"line":18,"column":22},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\TileState.js"},{"name":"../../ViewHint.js","loc":{"line":19,"column":21},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\ViewHint.js"},{"name":"../../events.js","loc":{"line":20,"column":38},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\events.js"},{"name":"../../events/EventType.js","loc":{"line":21,"column":22},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\events\\EventType.js"},{"name":"../../extent.js","loc":{"line":22,"column":118},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\extent.js"},{"name":"../../layer/VectorTileRenderType.js","loc":{"line":23,"column":33},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\layer\\VectorTileRenderType.js"},{"name":"../../render/canvas/BuilderType.js","loc":{"line":24,"column":23},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\render\\canvas\\BuilderType.js"},{"name":"../../render/canvas/BuilderGroup.js","loc":{"line":25,"column":31},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\render\\canvas\\BuilderGroup.js"},{"name":"./TileLayer.js","loc":{"line":26,"column":36},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\TileLayer.js"},{"name":"../../size.js","loc":{"line":27,"column":23},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\size.js"},{"name":"../vector.js","loc":{"line":28,"column":80},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\vector.js"},{"name":"../../transform.js","loc":{"line":29,"column":167},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\transform.js"},{"name":"../../render/canvas/ExecutorGroup.js","loc":{"line":30,"column":53},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js"},{"name":"../../obj.js","loc":{"line":31,"column":22},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\obj.js"},{"name":"../../render/canvas/hitdetect.js","loc":{"line":32,"column":55},"parent":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\renderer\\canvas\\VectorTileLayer.js","resolved":"C:\\MSc_Felippe\\felippehsk.github.io\\node_modules\\ol\\render\\canvas\\hitdetect.js"}],"generated":{"js":"var $UST7$exports={};$parcel$require(\"UST7\",\"../../util.js\"),$parcel$require(\"UST7\",\"../../TileState.js\"),$parcel$require(\"UST7\",\"../../ViewHint.js\"),$parcel$require(\"UST7\",\"../../events.js\"),$parcel$require(\"UST7\",\"../../events/EventType.js\"),$parcel$require(\"UST7\",\"../../extent.js\"),$parcel$require(\"UST7\",\"../../layer/VectorTileRenderType.js\"),$parcel$require(\"UST7\",\"../../render/canvas/BuilderType.js\"),$parcel$require(\"UST7\",\"../../render/canvas/BuilderGroup.js\"),$parcel$require(\"UST7\",\"./TileLayer.js\"),$parcel$require(\"UST7\",\"../../size.js\"),$parcel$require(\"UST7\",\"../vector.js\"),$parcel$require(\"UST7\",\"../../transform.js\"),$parcel$require(\"UST7\",\"../../render/canvas/ExecutorGroup.js\"),$parcel$require(\"UST7\",\"../../obj.js\"),$parcel$require(\"UST7\",\"../../render/canvas/hitdetect.js\");var $UST7$var$__extends=$UST7$exports&&$UST7$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$UST7$var$IMAGE_REPLAYS={image:[$UST7$import$ReplayType.POLYGON,$UST7$import$ReplayType.CIRCLE,$UST7$import$ReplayType.LINE_STRING,$UST7$import$ReplayType.IMAGE,$UST7$import$ReplayType.TEXT],hybrid:[$UST7$import$ReplayType.POLYGON,$UST7$import$ReplayType.LINE_STRING],vector:[]},$UST7$var$VECTOR_REPLAYS={image:[$UST7$import$ReplayType.DEFAULT],hybrid:[$UST7$import$ReplayType.IMAGE,$UST7$import$ReplayType.TEXT,$UST7$import$ReplayType.DEFAULT],vector:[$UST7$import$ReplayType.POLYGON,$UST7$import$ReplayType.CIRCLE,$UST7$import$ReplayType.LINE_STRING,$UST7$import$ReplayType.IMAGE,$UST7$import$ReplayType.TEXT,$UST7$import$ReplayType.DEFAULT]},$UST7$export$default=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=$UST7$import$createTransform(),r}return $UST7$var$__extends(t,e),t.prototype.prepareTile=function(e,t,r,i){var o,n=$UST7$import$getUid(e),a=e.getState();return(a===$UST7$import$TileState.LOADED&&e.hifi||a===$UST7$import$TileState.ERROR)&&n in this.tileListenerKeys_&&($UST7$import$unlistenByKey(this.tileListenerKeys_[n]),delete this.tileListenerKeys_[n]),a!==$UST7$import$TileState.LOADED&&a!==$UST7$import$TileState.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e,t,r)&&(o=!0,i&&(this.renderTileImageQueue_[n]=e))),o},t.prototype.getTile=function(t,r,i,o){var n=o.pixelRatio,a=o.viewState,$=a.resolution,l=a.projection,T=this.getLayer(),p=T.getSource().getTile(t,r,i,n,l);if(p.getState()<$UST7$import$TileState.LOADED){p.wantedResolution=$;var d=$UST7$import$getUid(p);if(!(d in this.tileListenerKeys_)){var s=$UST7$import$listen(p,$UST7$import$EventType.CHANGE,this.prepareTile.bind(this,p,n,l,!0));this.tileListenerKeys_[d]=s}}else{var u=o.viewHints;!!(u[$UST7$import$ViewHint.ANIMATING]||u[$UST7$import$ViewHint.INTERACTING])&&p.wantedResolution||(p.wantedResolution=$),this.prepareTile(p,n,l,!1)&&T.getRenderMode()!==$UST7$import$VectorTileRenderType.VECTOR&&this.renderTileImage_(p,o)}return e.prototype.getTile.call(this,t,r,i,o)},t.prototype.isDrawableTile=function(t){var r=this.getLayer();return e.prototype.isDrawableTile.call(this,t)&&r.getRenderMode()===$UST7$import$VectorTileRenderType.VECTOR||t.hasContext(r)},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(t){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,e.prototype.prepareFrame.call(this,t)},t.prototype.updateExecutorGroup_=function(e,t,r){var i=this.getLayer(),o=i.getRevision(),n=i.getRenderOrder()||null,a=e.wantedResolution,$=e.getReplayState(i);if($.dirty||$.renderedResolution!==a||$.renderedRevision!=o||$.renderedRenderOrder!=n||$.renderedZ!==e.sourceZ){var l=i.getSource(),T=l.getTileGrid(),p=l.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),d=l.getSourceTiles(t,r,e),s=$UST7$import$getUid(i);delete e.hitDetectionImageData[s],e.executorGroups[s]=[];for(var u=function(r,o){var u=d[r];if(u.getState()!=$UST7$import$TileState.LOADED)return\"continue\";var S=u.tileCoord,c=T.getTileCoordExtent(S),m=$UST7$import$getIntersection(p,c),y=$UST7$import$equals(c,m)?null:$UST7$import$buffer(m,i.getRenderBuffer()*a,g.tmpExtent);$.dirty=!1;var h=new $UST7$import$CanvasBuilderGroup(0,m,a,t,i.getDeclutter()),U=$UST7$import$getSquaredRenderTolerance(a,t),v=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,a)),t){var o=this.renderFeature(e,U,t,h);this.dirty_=this.dirty_||o,$.dirty=$.dirty||o}},f=u.getFeatures();n&&n!==$.renderedRenderOrder&&f.sort(n);for(var R=0,_=f.length;R<_;++R){var E=f[R];y&&!$UST7$import$intersects(y,E.getGeometry().getExtent())||v.call(g,E)}var C=h.finish(),I=i.getRenderMode()!==$UST7$import$VectorTileRenderType.VECTOR&&i.getDeclutter()&&1===d.length?null:m,x=new $UST7$import$CanvasExecutorGroup(I,a,t,l.getOverlaps(),C,i.getRenderBuffer());e.executorGroups[s].push(x)},g=this,S=0,c=d.length;S<c;++S)u(S);$.renderedRevision=o,$.renderedZ=e.sourceZ,$.renderedRenderOrder=n,$.renderedResolution=a}},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,o){var n=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var $,l,T,p=this.getLayer(),d=p.getDeclutter(),s=p.getSource().getTileGridForProjection(t.viewState.projection),u={},g=this.renderedTiles,S=function(){var t=g[l],T=s.getTileCoordExtent(t.wrappedTileCoord),S=$UST7$import$containsCoordinate(T,e);if(!d&&!S)return\"continue\";for(var c=t.executorGroups[$UST7$import$getUid(p)],m=0,y=c.length;m<y;++m){var h=c[m];$=$||h.forEachFeatureAtCoordinate(e,n,a,r,function(e){if(S||o&&-1!==o.indexOf(e)){var t=e.getId();if(void 0===t&&(t=$UST7$import$getUid(e)),!(t in u))return u[t]=!0,i(e,p)}},p.getDeclutter()?o:null)}};for(l=0,T=g.length;l<T;++l)S();return $},t.prototype.getFeatures=function(e){return new Promise(function(t,r){for(var i,o=this.getLayer(),n=$UST7$import$getUid(o),a=o.getSource(),$=this.renderedProjection,l=$.getExtent(),T=this.renderedResolution,p=a.getTileGridForProjection($),d=$UST7$import$applyTransform(this.renderedPixelToCoordinateTransform_,e.slice()),s=p.getTileCoordForCoordAndResolution(d,T),u=0,g=this.renderedTiles.length;u<g;++u)if(s.toString()===this.renderedTiles[u].tileCoord.toString()){if((i=this.renderedTiles[u]).getState()===$UST7$import$TileState.LOADED&&i.hifi){var S=p.getTileCoordExtent(i.tileCoord);if(a.getWrapX()&&$.canWrapX()&&!$UST7$import$containsExtent(l,S)){var c=$UST7$import$getWidth(l),m=Math.floor((d[0]-l[0])/c);d[0]-=m*c}break}i=void 0}if(!i||i.loadingSourceTiles>0)t([]);else{var y=p.getTileCoordExtent(i.wrappedTileCoord),h=$UST7$import$getTopLeft(y),U=[(d[0]-h[0])/T,(h[1]-d[1])/T],v=i.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),f=i.hitDetectionImageData[n];if(!f&&!this.animatingOrInteracting_){var R=$UST7$import$toSize(p.getTileSize(p.getZForResolution(T))),_=[R[0]/2,R[1]/2],E=this.renderedRotation_,C=[this.getRenderTransform(p.getTileCoordCenter(i.wrappedTileCoord),T,0,.5,_[0],_[1],0)];f=$UST7$import$createHitDetectionImageData(R,C,v,o.getStyleFunction(),p.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(o).renderedResolution,E),i.hitDetectionImageData[n]=f}t($UST7$import$hitDetect(U,v,f))}}.bind(this))},t.prototype.handleFontsChanged=function(){$UST7$import$clear(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderFrame=function(t,r){var i=t.viewHints,o=!(i[$UST7$import$ViewHint.ANIMATING]||i[$UST7$import$ViewHint.INTERACTING]);this.renderQueuedTileImages_(o,t),e.prototype.renderFrame.call(this,t,r),this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var n=this.getLayer(),a=n.getRenderMode();if(a===$UST7$import$VectorTileRenderType.IMAGE)return this.container;var $=n.getSource(),l=t.usedTiles[$UST7$import$getUid($)];for(var T in this.renderTileImageQueue_)l&&T in l||delete this.renderTileImageQueue_[T];for(var p=this.context,d=n.getDeclutter()?{}:null,s=$UST7$var$VECTOR_REPLAYS[a],u=t.pixelRatio,g=t.viewState,S=g.center,c=g.resolution,m=g.rotation,y=t.size,h=Math.round(y[0]*u),U=Math.round(y[1]*u),v=this.renderedTiles,f=$.getTileGridForProjection(t.viewState.projection),R=[],_=[],E=v.length-1;E>=0;--E)for(var C=v[E],I=C.tileCoord,x=f.getTileCoordExtent(C.wrappedTileCoord),L=f.getTileCoordExtent(I,this.tmpExtent)[0]-x[0],w=$UST7$import$multiply($UST7$import$scale(this.inversePixelTransform.slice(),1/u,1/u),this.getRenderTransform(S,c,m,u,h,U,L)),G=C.executorGroups[$UST7$import$getUid(n)],A=!1,D=0,j=G.length;D<j;++D){var O=G[D];if(O.hasExecutors(s)){var F=C.tileCoord[0],P=void 0;if(!d&&!A){P=O.getClipCoords(w),p.save();for(var N=0,b=R.length;N<b;++N){var q=R[N];F<_[N]&&(p.beginPath(),p.moveTo(P[0],P[1]),p.lineTo(P[2],P[3]),p.lineTo(P[4],P[5]),p.lineTo(P[6],P[7]),p.moveTo(q[6],q[7]),p.lineTo(q[4],q[5]),p.lineTo(q[2],q[3]),p.lineTo(q[0],q[1]),p.clip())}}O.execute(p,w,m,o,s,d),d||A||(p.restore(),R.push(P),_.push(F),A=!0)}}if(d){var M=t.layerStatesArray[t.layerIndex];$UST7$import$replayDeclutter(d,p,m,M.opacity,o,t.declutterItems)}return this.container},t.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},t.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var n=0,a=r.length;n<a;++n)o=$UST7$import$renderFeature(i,e,r[n],t,this.boundHandleStyleImageChange_)||o;else o=$UST7$import$renderFeature(i,e,r,t,this.boundHandleStyleImageChange_);return o},t.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),o=e.getReplayState(i),n=i.getRevision(),a=e.sourceZ,$=e.wantedResolution;return o.renderedTileResolution!==$||o.renderedTileRevision!==n||o.renderedTileZ!==a},t.prototype.renderTileImage_=function(e,t){var r=this.getLayer(),i=e.getReplayState(r),o=r.getRevision(),n=e.executorGroups[$UST7$import$getUid(r)];i.renderedTileRevision=o,i.renderedTileZ=e.sourceZ;var a=e.wrappedTileCoord,$=a[0],l=r.getSource(),T=t.pixelRatio,p=t.viewState.projection,d=l.getTileGridForProjection(p),s=d.getResolution(e.tileCoord[0]),u=t.pixelRatio/e.wantedResolution*s,g=d.getResolution($),S=e.getContext(r);T=Math.max(T,u/T);var c=l.getTilePixelSize($,T,p);S.canvas.width=c[0],S.canvas.height=c[1];var m=T/u;if(1!==m){var y=$UST7$import$resetTransform(this.tmpTransform_);$UST7$import$scaleTransform(y,m,m),S.setTransform.apply(S,y)}var h=d.getTileCoordExtent(a,this.tmpExtent),U=u/g,v=$UST7$import$resetTransform(this.tmpTransform_);$UST7$import$scaleTransform(v,U,-U),$UST7$import$translateTransform(v,-h[0],-h[3]);for(var f=0,R=n.length;f<R;++f){n[f].execute(S,v,0,!0,$UST7$var$IMAGE_REPLAYS[r.getRenderMode()])}i.renderedTileResolution=e.wantedResolution},t}($UST7$import$CanvasTileLayerRenderer);$UST7$exports.default=$UST7$export$default;"},"sourceMaps":null,"error":null,"hash":"4ef770e02e95eec5265769a96b465e8c","cacheData":{"env":{},"imports":{"$UST7$import$getUid":["../../util.js","getUid"],"$UST7$import$TileState":["../../TileState.js","default"],"$UST7$import$ViewHint":["../../ViewHint.js","default"],"$UST7$import$listen":["../../events.js","listen"],"$UST7$import$unlistenByKey":["../../events.js","unlistenByKey"],"$UST7$import$EventType":["../../events/EventType.js","default"],"$UST7$import$buffer":["../../extent.js","buffer"],"$UST7$import$containsCoordinate":["../../extent.js","containsCoordinate"],"$UST7$import$equals":["../../extent.js","equals"],"$UST7$import$getIntersection":["../../extent.js","getIntersection"],"$UST7$import$intersects":["../../extent.js","intersects"],"$UST7$import$containsExtent":["../../extent.js","containsExtent"],"$UST7$import$getWidth":["../../extent.js","getWidth"],"$UST7$import$getTopLeft":["../../extent.js","getTopLeft"],"$UST7$import$VectorTileRenderType":["../../layer/VectorTileRenderType.js","default"],"$UST7$import$ReplayType":["../../render/canvas/BuilderType.js","default"],"$UST7$import$CanvasBuilderGroup":["../../render/canvas/BuilderGroup.js","default"],"$UST7$import$CanvasTileLayerRenderer":["./TileLayer.js","default"],"$UST7$import$toSize":["../../size.js","toSize"],"$UST7$import$getSquaredRenderTolerance":["../vector.js","getSquaredTolerance"],"$UST7$import$renderFeature":["../vector.js","renderFeature"],"$UST7$import$applyTransform":["../../transform.js","apply"],"$UST7$import$createTransform":["../../transform.js","create"],"$UST7$import$resetTransform":["../../transform.js","reset"],"$UST7$import$scaleTransform":["../../transform.js","scale"],"$UST7$import$translateTransform":["../../transform.js","translate"],"$UST7$import$multiply":["../../transform.js","multiply"],"$UST7$import$scale":["../../transform.js","scale"],"$UST7$import$CanvasExecutorGroup":["../../render/canvas/ExecutorGroup.js","default"],"$UST7$import$replayDeclutter":["../../render/canvas/ExecutorGroup.js","replayDeclutter"],"$UST7$import$clear":["../../obj.js","clear"],"$UST7$import$createHitDetectionImageData":["../../render/canvas/hitdetect.js","createHitDetectionImageData"],"$UST7$import$hitDetect":["../../render/canvas/hitdetect.js","hitDetect"]},"exports":{"default":"$UST7$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}